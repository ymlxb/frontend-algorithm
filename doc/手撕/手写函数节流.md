
## 函数节流是指规定一个单位时间，在这个单位时间内，只能有一次触发事件的回调函数执行，如果在同一个单位时间内某事件被触发多次，只有一次能生效。

## 节流函数定义：
  节流函数指在困定时间段内，多次函数调用只生效一次。该时间段是固定的，与防抖的弹性时间不同。

## 节流与防抖的区别：
防抖的时间是弹性的，若在延迟时间内再次触发，则重新开始延迟计时，直到延迟时间内无触发才执行；节流是在固定的时间段内无论触发多少次，仅执行一次(可选择执行第一次或最后一次)。

## 节流函数实现逻辑(执行第一次)
通过记录上一次执行时间(lastTime)实现。初始 lastTime 为 null，当触发函数时：若 lastTime 为 null(首次执行)，或当前时间减去 lastTime 大于等待时间(技能 CD 结束)，则执行函数并更新 lastTime 为当前时间。后续在 CD 时间内的触发均不执行。

## 实现细节注意事项
需接收并透传参数，确保函数调用时的参数正确传递；不能使用箭头函数，避免 this 指向问题；直接执行函数而非延迟执行，避免降低用户体验。

```js
function throttle(fn, wait) {
  let lastTime = null;
  return function(...argus) {
    let now = Date.now();
    if (lastTime === null || now - lastTime > wait) {
      fn.apply(this, argus);
      lastTime = now;
    }
  }
}

// 创建测试函数
let count = 0;
const log = () => {
  count++;
  console.log(`函数第 ${count} 次执行，时间:`, new Date().toLocaleTimeString());
};

// 创建节流函数（1秒内只能执行一次）
const throttledLog = throttle(log, 1000);

console.log('快速连续调用10次（1秒内）:');
const startTime = Date.now();
for (let i = 0; i < 10; i++) {
  throttledLog();
}

// 等待查看结果
setTimeout(() => {
  console.log(`1秒后 count = ${count} (应该为1)`);
  
  console.log('\n2秒后再调用一次:');
  throttledLog();
  
  setTimeout(() => {
    console.log(`再过0.5秒 count = ${count} (应该为2)`);
  }, 500);
}, 1000);
```